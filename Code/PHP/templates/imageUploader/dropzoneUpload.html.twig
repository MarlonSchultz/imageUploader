{% extends 'base.html.twig' %}
    {% block stylesheets %}
        {{ parent() }}
        <link href="{{ asset('css/dropzone.css') }}" rel="stylesheet"/>
    {% endblock %}
{% block title %}Upload picture!{% endblock %}

{% block body %}
    <div class="col-6 dropzone mt-5">
        <div class="dz-message d-flex flex-column">
            <i class="fas fa-cloud-upload-alt"></i>
            Drag &amp; Drop here or click
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/dropzone.js') }}"></script>
    <script>
        // init,configure dropzone
        Dropzone.autoDiscover = false;
        var dropzone = new Dropzone(".dropzone", {
            url: '{{ path('xhr_upload') }}',
            maxFiles: 10,
            paramName: 'uploadedFile',
            dictMaxFilesExceeded: 'Only 10 Images at once can be uploaded',
            acceptedFiles: '.jpg, jpeg',
            maxFilesize: 5,  // in Mb
            addRemoveLinks: false,
              previewTemplate: "<div class=\"dz-preview dz-file-preview\">\n" +
                "  <div class=\"dz-details\">\n" +
                "  <div class=\"dz-success-mark\"><span>✔</span></div>\n" +
                "  <div class=\"dz-error-mark\"><span>✘</span></div>\n" +
                "    <div class=\"dz-size\" data-dz-size></div>\n" +
                "    <img data-dz-thumbnail />\n" +
                "  </div>\n" +
                "  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n" +
                "  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n" +
                "</div>\n"
        });
        dropzone.on("success", function (file) {
            let successMark = document.querySelector(".dz-success-mark");
            console.log(successMark);
        });
    </script>
{% endblock %}
